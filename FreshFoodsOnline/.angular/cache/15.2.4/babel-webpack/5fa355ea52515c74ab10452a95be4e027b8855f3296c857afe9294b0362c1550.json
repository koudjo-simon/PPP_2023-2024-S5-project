{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet CommandComponent = class CommandComponent {\n  constructor(cartService, fb, cmdService, router, myValService) {\n    this.cartService = cartService;\n    this.fb = fb;\n    this.cmdService = cmdService;\n    this.router = router;\n    this.myValService = myValService;\n    this.totalPrice = 0;\n    this.commandLines = [];\n  }\n  ngOnInit() {\n    /* this.cartService.getCartFoods().subscribe({\r\n      next: data => {\r\n        this.commandFoods = data;\r\n        this.commandFoods.forEach(f =>{\r\n          this.totalPrice += f.price;\r\n        })\r\n        console.log(\"Mes foods \", this.commandFoods)\r\n      },\r\n      error: err => {\r\n        this.errorMessage = err;\r\n        console.log(\"Une erreur\",err);\r\n      }\r\n    }); */\n    this.cmdService.getCommandLines().subscribe({\n      next: data => {\n        this.commandLines = data;\n      },\n      error: err => {\n        console.log(err);\n      }\n    });\n    this.commandFormGroup = this.fb.group({\n      firstname: this.fb.control('', Validators.required),\n      lastname: ['', [Validators.required]],\n      bithdate: ['', [Validators.required]],\n      email: ['', [Validators.email, Validators.required]],\n      country: ['', [Validators.required]],\n      region: ['', [Validators.required]],\n      address: ['', [Validators.required]]\n    });\n  }\n  handleCommandClicked() {\n    let firstname = this.commandFormGroup.value.firstname;\n    let lastname = this.commandFormGroup.value.lastname;\n    let bithdate = this.commandFormGroup.value.bithdate;\n    let email = this.commandFormGroup.value.email;\n    let country = this.commandFormGroup.value.country;\n    let region = this.commandFormGroup.value.region;\n    let address = this.commandFormGroup.value.address;\n    let client = {\n      firstname: firstname,\n      lastname: lastname,\n      bithdate: bithdate,\n      email: email,\n      country: country,\n      region: region,\n      address: address\n    };\n    this.commandFoods.forEach(element => {\n      let commandLine = {\n        food: element,\n        quantity: 1,\n        totalPrice: element.price\n      };\n      this.commandLines.push(commandLine);\n    });\n    let command = {\n      client: client,\n      commands: this.commandLines,\n      date: new Date()\n    };\n    this.cmdService.addCommand(command).subscribe({\n      next: data => {\n        console.log(data);\n        this.router.navigateByUrl(\"/client/command_success\");\n      }\n    });\n  }\n  setCommandPassed() {}\n};\nCommandComponent = __decorate([Component({\n  selector: 'app-command',\n  templateUrl: './command.component.html',\n  styleUrls: ['./command.component.scss']\n})], CommandComponent);\nexport { CommandComponent };","map":{"version":3,"mappings":"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","names":["Component","Validators","CommandComponent","constructor","cartService","fb","cmdService","router","myValService","ngOnInit","getCommandLines","subscribe","next","data","commandLines","error","err","console","log","commandFormGroup","group","firstname","control","required","lastname","bithdate","email","country","region","address","handleCommandClicked","value","client","commandFoods","forEach","element","commandLine","food","quantity","totalPrice","price","push","command","commands","date","Date","addCommand","navigateByUrl","setCommandPassed","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["D:\\ESIG GLOBAL SUCCESS - PARCOURS\\ESIG LICENCE 2 - GÃ©nie Logiciel\\ESIG Licence 2 - SEMESTRE 4\\Licence 2 - Complement Web\\TRAVAIL DE M. AGBO - COMPLEMENT DEVELOPPEMENT\\FreshFoodsOnline\\src\\app\\module-client\\command\\command.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CartService } from 'src/app/services/cart.service';\nimport { Foods } from 'src/app/shared/model/food';\nimport { Command } from '../../shared/model/command';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Client } from 'src/app/shared/model/client';\nimport { CommandLine } from 'src/app/shared/model/command-line';\nimport { CommandService } from '../../services/command.service';\nimport { Router } from '@angular/router';\nimport { MyValidatorsService } from 'src/app/services/my-validators.service';\n\n@Component({\n  selector: 'app-command',\n  templateUrl: './command.component.html',\n  styleUrls: ['./command.component.scss']\n})\nexport class CommandComponent implements OnInit{\n\n  public commandFoods!: Foods[];\n  public errorMessage!: string;\n  public totalPrice: number = 0;\n  \n  public commandLines: CommandLine[] = [];\n\n  public commandFormGroup!: FormGroup;\n\n  constructor(private cartService: CartService,\n    private fb: FormBuilder,\n    private cmdService: CommandService,\n    private router: Router,\n    public myValService: MyValidatorsService){\n  }\n\n  ngOnInit(): void {\n    /* this.cartService.getCartFoods().subscribe({\n      next: data => {\n        this.commandFoods = data;\n        this.commandFoods.forEach(f =>{\n          this.totalPrice += f.price;\n        })\n        console.log(\"Mes foods \", this.commandFoods)\n      },\n      error: err => {\n        this.errorMessage = err;\n        console.log(\"Une erreur\",err);\n      }\n    }); */\n\n    this.cmdService.getCommandLines().subscribe({\n      next: data => {\n        this.commandLines = data;\n      },\n      error: err => {\n        console.log(err);\n      }\n    })\n\n    this.commandFormGroup = this.fb.group({\n      firstname: this.fb.control('', Validators.required),\n      lastname: ['', [Validators.required]],\n      bithdate: ['', [Validators.required]],\n      email: ['', [Validators.email, Validators.required]],\n      country: ['', [Validators.required]],\n      region: ['', [Validators.required]],\n      address: ['', [Validators.required]]\n    });\n  }\n\n  public handleCommandClicked(){\n    let firstname = this.commandFormGroup.value.firstname;\n    let lastname = this.commandFormGroup.value.lastname;\n    let bithdate = this.commandFormGroup.value.bithdate;\n    let email = this.commandFormGroup.value.email;\n    let country = this.commandFormGroup.value.country;\n    let region = this.commandFormGroup.value.region;\n    let address = this.commandFormGroup.value.address;\n\n    let client: Client = {\n      firstname: firstname,\n      lastname: lastname,\n      bithdate: bithdate,\n      email: email,\n      country: country,\n      region: region,\n      address: address\n    }\n\n    this.commandFoods.forEach(element => {\n      let commandLine: CommandLine = {\n        food: element,\n        quantity: 1,\n        totalPrice: element.price\n      }\n      this.commandLines.push(commandLine);\n    });\n\n    let command: Command = {\n      client: client,\n      commands: this.commandLines,\n      date: new Date()\n    }\n\n    this.cmdService.addCommand(command).subscribe({\n      next: data => {\n        console.log(data);\n        this.router.navigateByUrl(\"/client/command_success\");\n      }\n    });\n  }\n\n  public setCommandPassed(){\n    \n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}