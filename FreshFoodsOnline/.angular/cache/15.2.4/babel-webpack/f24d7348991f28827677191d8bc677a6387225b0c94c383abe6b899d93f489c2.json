{"ast":null,"code":"import { of, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class CartService {\n  constructor() {\n    this.cardFoodsList = [];\n    this.cardCommandLinesList = [];\n  }\n  addToCart(food) {\n    this.cardFoodsList.push(food);\n    /*this.cardFoodsList.forEach(f => {\r\n      this.cardCommandLinesList.forEach(c => {\r\n        const existingCommandLine = this.cardCommandLinesList\r\n          .findIndex(commandLine => commandLine.food.foodId == food.foodId);\r\n        if (existingCommandLine) {\r\n          this.cardCommandLinesList[existingCommandLine].quantity++;\r\n          this.cardCommandLinesList[existingCommandLine].totalCommandLinePrice += food.price;\r\n        } else {\r\n          let commandLine: CommandLine = {\r\n            commandLineId: \"\",\r\n            food: f,\r\n            commandId: \"\",\r\n            unitPrice: f.price,\r\n            quantity: 1,\r\n            totalCommandLinePrice: f.price\r\n          };\r\n          this.cardCommandLinesList.push(commandLine);\r\n        }\r\n      });\r\n      })*/\n    // Recherche d'une ligne de commande comportant deja cette Food\n    const existingCommandLineIndex = this.cardCommandLinesList.findIndex(cmdLine => cmdLine.food.foodId === food.foodId);\n    if (existingCommandLineIndex) {\n      this.cardCommandLinesList[existingCommandLineIndex].quantity++;\n      this.cardCommandLinesList[existingCommandLineIndex].totalCommandLinePrice += food.price;\n    } else {}\n  }\n  addCommandLinesToTheCart(cmdLines) {\n    cmdLines.forEach(cmdLine => {\n      this.cardCommandLinesList.push(cmdLine);\n    });\n    return of(true);\n  }\n  getCartCmdLinesFoods() {\n    if (this.cardFoodsList.length > 0) {\n      return of(this.cardCommandLinesList);\n    } else {\n      return throwError(() => new Error(\"Food untifined in the cart list.\"));\n    }\n  }\n  getTotalPrice() {\n    let price = 0;\n    this.cardFoodsList.forEach(element => {\n      price += element.price;\n    });\n    return of(price);\n  }\n  deleteComandeLine(commandLineId) {\n    this.cardCommandLinesList = this.cardCommandLinesList.filter(c => c.commandLineId == commandLineId);\n    return of(true);\n  }\n  deleteFoodById(id) {\n    this.cardFoodsList = this.cardFoodsList.filter(f => f.foodId == id);\n    return of(true);\n  }\n  cardContainAddFoods() {\n    return this.cardFoodsList.length > 0;\n  }\n}\nCartService.ɵfac = function CartService_Factory(t) {\n  return new (t || CartService)();\n};\nCartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CartService,\n  factory: CartService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AACA,SAAoBA,EAAE,EAAEC,UAAU,QAAO,MAAM;;AAO/C,OAAM,MAAOC,WAAW;EAKtBC;IAHQ,kBAAa,GAAW,EAAE;IAC1B,yBAAoB,GAAkB,EAAE;EAEhC;EAETC,SAAS,CAACC,IAAU;IACzB,IAAI,CAACC,aAAa,CAACC,IAAI,CAACF,IAAI,CAAC;IAC7B;;;;;;;;;;;;;;;;;;;;IAoBA;IACA,MAAMG,wBAAwB,GAAG,IAAI,CAACC,oBAAoB,CACvDC,SAAS,CAACC,OAAO,IAAIA,OAAO,CAACN,IAAI,CAACO,MAAM,KAAKP,IAAI,CAACO,MAAM,CAAC;IAC5D,IAAIJ,wBAAwB,EAAC;MAC3B,IAAI,CAACC,oBAAoB,CAACD,wBAAwB,CAAC,CAACK,QAAQ,EAAE;MAC9D,IAAI,CAACJ,oBAAoB,CAACD,wBAAwB,CAAC,CAACM,qBAAqB,IAAIT,IAAI,CAACU,KAAK;KACxF,MAAK;EAGR;EAEOC,wBAAwB,CAACC,QAA4B;IAC1DA,QAAQ,CAACC,OAAO,CAACP,OAAO,IAAG;MACzB,IAAI,CAACF,oBAAoB,CAACF,IAAI,CAACI,OAAO,CAAC;IACzC,CAAC,CAAC;IACF,OAAOX,EAAE,CAAC,IAAI,CAAC;EACjB;EAEOmB,oBAAoB;IACzB,IAAI,IAAI,CAACb,aAAa,CAACc,MAAM,GAAG,CAAC,EAAE;MACjC,OAAOpB,EAAE,CAAC,IAAI,CAACS,oBAAoB,CAAC;KACrC,MAAM;MACL,OAAOR,UAAU,CAAC,MAAM,IAAIoB,KAAK,CAAC,kCAAkC,CAAC,CAAC;;EAE1E;EAEOC,aAAa;IAClB,IAAIP,KAAK,GAAW,CAAC;IACrB,IAAI,CAACT,aAAa,CAACY,OAAO,CAACK,OAAO,IAAG;MACnCR,KAAK,IAAIQ,OAAO,CAACR,KAAK;IACxB,CAAC,CAAC;IACF,OAAOf,EAAE,CAACe,KAAK,CAAC;EAClB;EAEOS,iBAAiB,CAACC,aAAqB;IAC5C,IAAI,CAAChB,oBAAoB,GAAG,IAAI,CAACA,oBAAoB,CAACiB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACF,aAAa,IAAIA,aAAa,CAAC;IACnG,OAAOzB,EAAE,CAAC,IAAI,CAAC;EACjB;EAEO4B,cAAc,CAACC,EAAU;IAC9B,IAAI,CAACvB,aAAa,GAAG,IAAI,CAACA,aAAa,CAACoB,MAAM,CAACI,CAAC,IAAIA,CAAC,CAAClB,MAAM,IAAIiB,EAAE,CAAC;IACnE,OAAO7B,EAAE,CAAC,IAAI,CAAC;EACjB;EAEO+B,mBAAmB;IACxB,OAAO,IAAI,CAACzB,aAAa,CAACc,MAAM,GAAG,CAAC;EACtC;;AA3EWlB,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAA8B,SAAX9B,WAAW;EAAA+B,YAFV;AAAM","names":["of","throwError","CartService","constructor","addToCart","food","cardFoodsList","push","existingCommandLineIndex","cardCommandLinesList","findIndex","cmdLine","foodId","quantity","totalCommandLinePrice","price","addCommandLinesToTheCart","cmdLines","forEach","getCartCmdLinesFoods","length","Error","getTotalPrice","element","deleteComandeLine","commandLineId","filter","c","deleteFoodById","id","f","cardContainAddFoods","factory","providedIn"],"sourceRoot":"","sources":["D:\\ESIG GLOBAL SUCCESS - PARCOURS\\ESIG LICENCE 2 - Génie Logiciel\\ESIG Licence 2 - SEMESTRE 4\\Licence 2 - Complement Web\\TRAVAIL DE M. AGBO - COMPLEMENT DEVELOPPEMENT\\MyWork\\FreshFoodsOnline\\src\\app\\services\\cart.service.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\nimport {Observable, of, throwError} from 'rxjs';\nimport {Food} from '../shared/model/food';\nimport {CommandLine} from \"../shared/model/command-line\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n\n  private cardFoodsList: Food[] = [];\n  private cardCommandLinesList: CommandLine[] = [];\n\n  constructor() { }\n\n  public addToCart(food: Food): void {\n    this.cardFoodsList.push(food);\n    /*this.cardFoodsList.forEach(f => {\n      this.cardCommandLinesList.forEach(c => {\n        const existingCommandLine = this.cardCommandLinesList\n          .findIndex(commandLine => commandLine.food.foodId == food.foodId);\n        if (existingCommandLine) {\n          this.cardCommandLinesList[existingCommandLine].quantity++;\n          this.cardCommandLinesList[existingCommandLine].totalCommandLinePrice += food.price;\n        } else {\n          let commandLine: CommandLine = {\n            commandLineId: \"\",\n            food: f,\n            commandId: \"\",\n            unitPrice: f.price,\n            quantity: 1,\n            totalCommandLinePrice: f.price\n          };\n          this.cardCommandLinesList.push(commandLine);\n        }\n      });\n      })*/\n    // Recherche d'une ligne de commande comportant deja cette Food\n    const existingCommandLineIndex = this.cardCommandLinesList\n      .findIndex(cmdLine => cmdLine.food.foodId === food.foodId);\n    if (existingCommandLineIndex){\n      this.cardCommandLinesList[existingCommandLineIndex].quantity++;\n      this.cardCommandLinesList[existingCommandLineIndex].totalCommandLinePrice += food.price;\n    }else {\n      \n    }\n  }\n\n  public addCommandLinesToTheCart(cmdLines: Array<CommandLine>): Observable<boolean> {\n    cmdLines.forEach(cmdLine => {\n      this.cardCommandLinesList.push(cmdLine)\n    });\n    return of(true);\n  }\n\n  public getCartCmdLinesFoods(): Observable<CommandLine[]> {\n    if (this.cardFoodsList.length > 0) {\n      return of(this.cardCommandLinesList);\n    } else {\n      return throwError(() => new Error(\"Food untifined in the cart list.\"));\n    }\n  }\n\n  public getTotalPrice(): Observable<number> {\n    let price: number = 0;\n    this.cardFoodsList.forEach(element => {\n      price += element.price;\n    });\n    return of(price);\n  }\n\n  public deleteComandeLine(commandLineId: string): Observable<boolean> {\n    this.cardCommandLinesList = this.cardCommandLinesList.filter(c => c.commandLineId == commandLineId);\n    return of(true);\n  }\n\n  public deleteFoodById(id: string): Observable<boolean> {\n    this.cardFoodsList = this.cardFoodsList.filter(f => f.foodId == id);\n    return of(true);\n  }\n\n  public cardContainAddFoods() {\n    return this.cardFoodsList.length > 0;\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}