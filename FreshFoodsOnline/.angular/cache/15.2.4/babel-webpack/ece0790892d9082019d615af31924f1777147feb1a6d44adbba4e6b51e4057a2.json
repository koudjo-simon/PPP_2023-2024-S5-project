{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/food.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../admin-services/category.service\";\nimport * as i4 from \"../admin-services/authentication/authentication.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction CategoryListComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMessage, \" \");\n  }\n}\nfunction CategoryListComponent_div_2_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function CategoryListComponent_div_2_tr_20_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const cat_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.handleEditCategory(cat_r4));\n    });\n    i0.ɵɵelement(9, \"i\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function CategoryListComponent_div_2_tr_20_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const cat_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.handleDeleteCategory(cat_r4));\n    });\n    i0.ɵɵelement(11, \"i\", 15);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cat_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cat_r4.categoryId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cat_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cat_r4.description);\n  }\n}\nfunction CategoryListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"h3\", 5);\n    i0.ɵɵtext(3, \"Category List Administration\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 6);\n    i0.ɵɵtext(5, \"ADD\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 7)(7, \"div\", 8)(8, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function CategoryListComponent_div_2_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.searchKeyword = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(9, \"hr\");\n    i0.ɵɵelementStart(10, \"table\", 10)(11, \"thead\")(12, \"tr\")(13, \"th\");\n    i0.ɵɵtext(14, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\");\n    i0.ɵɵtext(18, \"Description\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"tbody\");\n    i0.ɵɵtemplate(20, CategoryListComponent_div_2_tr_20_Template, 12, 3, \"tr\", 11);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.searchKeyword);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.searchCategories);\n  }\n}\nexport class CategoryListComponent {\n  constructor(foodService, router, catService, authService) {\n    this.foodService = foodService;\n    this.router = router;\n    this.catService = catService;\n    this.authService = authService;\n    this.categories = [];\n    this._searchKeyword = \"\";\n    this.searchCategories = [];\n  }\n  ngOnInit() {\n    this.catService.getCategories().subscribe({\n      next: prd => {\n        this.categories = prd;\n        this.searchCategories = this.categories;\n        console.log(this.categories);\n      },\n      error: err => {\n        console.error(err);\n        this.errorMessage = err;\n      }\n    });\n  }\n  get searchKeyword() {\n    return this._searchKeyword;\n  }\n  set searchKeyword(keyword) {\n    this._searchKeyword = keyword;\n    this.searchCategories = this.searchKeyword ? this.filterFoods(this.searchKeyword) : this.categories;\n  }\n  filterFoods(criteria) {\n    criteria = criteria.toLowerCase();\n    const res = this.categories.filter(cat => cat.name.toLowerCase().indexOf(criteria) != -1);\n    return res;\n  }\n  handleDeleteCategory(cat) {\n    let conf = confirm(\"Are you sure that you want to delete food \" + cat.name + \" ?\");\n    if (!conf) return;\n    this.catService.deleteCategoryById(cat.categoryId).subscribe({\n      next: data => {\n        let index = this.categories.indexOf(cat);\n        this.categories.splice(index, 1);\n      }\n    });\n  }\n  handleEditCategory(cat) {\n    let url = \"/admin/category/\" + \"edit/\" + cat.categoryId;\n    this.router.navigateByUrl(url);\n  }\n}\nCategoryListComponent.ɵfac = function CategoryListComponent_Factory(t) {\n  return new (t || CategoryListComponent)(i0.ɵɵdirectiveInject(i1.FoodService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.CategoryService), i0.ɵɵdirectiveInject(i4.AuthenticationService));\n};\nCategoryListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CategoryListComponent,\n  selectors: [[\"app-category-list\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[\"errors\", \"\"], [\"class\", \"card mt-5\", 4, \"ngIf\", \"ngIfElse\"], [1, \"text-danger\"], [1, \"card\", \"mt-5\"], [1, \"card-header\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-between\"], [\"type\", \"btn btn-success\", \"routerLink\", \"/admin/category/add\"], [1, \"card-body\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Enter the food name for search\", \"id\", \"search\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-outline-warning\", 3, \"click\"], [1, \"bi\", \"bi-file\"], [1, \"btn\", \"btn-outline-danger\", 3, \"click\"], [1, \"bi\", \"bi-trash\"]],\n  template: function CategoryListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CategoryListComponent_ng_template_0_Template, 2, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(2, CategoryListComponent_div_2_Template, 21, 2, \"div\", 1);\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchCategories)(\"ngIfElse\", _r0);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i2.RouterLink, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","CategoryListComponent","constructor","foodService","router","catService","authService","ngOnInit","getCategories","subscribe","next","prd","categories","searchCategories","console","log","error","err","errorMessage","searchKeyword","_searchKeyword","keyword","filterFoods","criteria","toLowerCase","res","filter","cat","name","indexOf","handleDeleteCategory","conf","confirm","deleteCategoryById","categoryId","data","index","splice","handleEditCategory","url","navigateByUrl","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\PROJETS\\PPP - 2023_2024\\FreshFoodsOnline\\src\\app\\module-admin\\category-list\\category-list.component.html","D:\\PROJETS\\PPP - 2023_2024\\FreshFoodsOnline\\src\\app\\module-admin\\category-list\\category-list.component.ts"],"sourcesContent":["<ng-template #errors>\n  <div class=\"text-danger\">\n    {{errorMessage}}\n  </div>\n</ng-template>\n<div class=\"card mt-5\" *ngIf=\"searchCategories ; else errors\">\n  <div class=\"card-header\">\n    <h3 class=\"d-flex align-items-center justify-content-between\">Category List Administration</h3>\n    <a type=\"btn btn-success\" routerLink=\"/admin/category/add\">ADD</a>\n  </div>\n  <div class=\"card-body\">\n    <div class=\"input-group\">\n      <input type=\"text\" placeholder=\"Enter the food name for search\" [(ngModel)]=\"searchKeyword\" class=\"form-control\" id=\"search\">\n    </div>\n    <hr>\n    <table class=\"table\">\n      <thead>\n      <tr>\n        <th>ID</th>\n        <th>Name</th>\n        <th>Description</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr *ngFor=\"let cat of searchCategories\">\n        <td>{{cat.categoryId}}</td>\n        <td>{{cat.name}}</td>\n        <td>{{cat.description}}</td>\n        <td>\n          <button class=\"btn btn-outline-warning\" (click)=\"handleEditCategory(cat)\">\n            <i class=\"bi bi-file\"></i>\n          </button>\n          <button class=\"btn btn-outline-danger\" (click)=\"handleDeleteCategory(cat)\">\n            <i class=\"bi bi-trash\"></i>\n          </button>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n","import { Component } from '@angular/core';\nimport {Admin} from \"../admin-model/admin\";\nimport {Product} from \"../../shared/model/Product\";\nimport {FoodService} from \"../../services/food.service\";\nimport {Router} from \"@angular/router\";\nimport {AuthenticationService} from \"../admin-services/authentication/authentication.service\";\nimport {CategoryService} from \"../admin-services/category.service\";\nimport {Category} from \"../../shared/model/category\";\n\n@Component({\n  selector: 'app-category-list',\n  templateUrl: './category-list.component.html',\n  styleUrls: ['./category-list.component.scss']\n})\nexport class CategoryListComponent {\n\n  public authAdmin!: Admin;\n  public categories: Category[] = [];\n  public errorMessage!: string;\n  private _searchKeyword: string = \"\";\n  public searchCategories: Category[] = [];\n\n  constructor(private foodService: FoodService,\n              private router: Router,\n              private catService: CategoryService,\n              private authService: AuthenticationService){}\n\n  ngOnInit(): void {\n\n    this.catService.getCategories().subscribe({\n      next: (prd) => {\n        this.categories = prd;\n        this.searchCategories = this.categories;\n        console.log(this.categories);\n      },\n      error: err => {\n        console.error(err);\n        this.errorMessage = err;\n      }\n    });\n  }\n\n  public get searchKeyword(): string{\n    return this._searchKeyword;\n  }\n\n  public set searchKeyword(keyword: string){\n    this._searchKeyword = keyword;\n    this.searchCategories = this.searchKeyword ? this.filterFoods(this.searchKeyword) : this.categories;\n  }\n\n  private filterFoods(criteria: string): Category[]{\n    criteria = criteria.toLowerCase();\n    const res = this.categories.filter(\n      (cat: Category) => cat.name.toLowerCase().indexOf(criteria) != -1\n    );\n    return res;\n  }\n\n  handleDeleteCategory(cat: Category){\n    let conf = confirm(\"Are you sure that you want to delete food \"+cat.name+\" ?\");\n    if (!conf) return;\n    this.catService.deleteCategoryById(cat.categoryId).subscribe({\n      next : data => {\n        let index = this.categories.indexOf(cat);\n        this.categories.splice(index, 1);\n      }\n    });\n  }\n\n  handleEditCategory(cat: Category){\n      let url = \"/admin/category/\"+ \"edit/\" + cat.categoryId;\n      this.router.navigateByUrl(url);\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}